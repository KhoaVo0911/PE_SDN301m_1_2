<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma-rtl.min.css" />
  <link rel="stylesheet" href="/css/forms.css" />
  <link rel="stylesheet" href="/css/product.css" />
  <title>Edit Sections</title>
</head>

<body>
  <nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://bulma.io">
        <img src="https://bulma.io/images/bulma-logo.png" width="112" height="28" />
      </a>

      <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div id="navbarBasicExample" class="navbar-menu">
      <div class="navbar-start">
        <a class="navbar-item" href="/sections">Sections</a>
        <a class="navbar-item" href="/sections/add-section">Add</a>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <div class="buttons">
            <a href="/users/logout" class="button is-light">Log out</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
  <!-- <main>
    <form class="product-form" action="/sections/<% if (editing) { %>edit-section<% } else { %>add-section<% } %>"
      method="POST">
      <div class="form-control">
        <label for="title">Name</label>
        <input type="text" name="sectionName" id="title"
          value="<% if (editing) { %><%= section.sectionName %><% } %>" />
      </div>
      <div class="form-control">
        <label for="imageUrl">Description</label>
        <textarea type="text" name="sectionDescription" id="imageUrl" rows="5">
<% if (editing) { %><%= section.sectionDescription %><% } %></textarea>
      </div>
      <div class="form-control">
        <label for="price">Duration</label>
        <input type="number" name="duration" id="price" value="<% if (editing) { %><%= section.duration %><% } %>" />
      </div>
      <div class="form-control">
        <label for="isMainTask">Is Main Task</label>
        <select name="isMainTask" id="isMainTask">
          <option value="true" <% if(editing && section.isMainTask) { %>selected<% } %>>Yes</option>
          <option value="false" <% if(editing && !section.isMainTask) { %>selected<% } %>>No</option>
        </select>
      </div>
      <div class="form-control">
        <label for="courseName">Course Name</label>
        <select name="courseId" id="courseName">
          <% courses.forEach(function(course) { %>
            <option value="<%= course._id %>" <% if(editing && section.course.toString()===course._id.toString()) { %>
              selected<% } %>>
                <%= course.courseName %>
            </option>
            <% }); %>
        </select>
      </div>


      <% if (editing) { %>
        <input type="hidden" value="<%= section._id %>" name="sectionId" />
        <% } %>
          <button class="btn" type="submit">
            <% if (editing) { %>Update Section<% } else { %>Add Section<% } %>
          </button>
    </form>
  </main> -->
  <main>
    <form class="product-form" action="/sections/<% if (editing) { %>edit-section<% } else { %>add-section<% } %>"
      method="POST">
      <div class="field">
        <label class="label" for="title">Name</label>
        <div class="control">
          <input class="input" type="text" name="sectionName" id="title"
            value="<% if (editing) { %><%= section.sectionName %><% } %>" required pattern="[A-Z][A-Za-z0-9/ ]*"
            title="Each word must begin with a capital letter and may include A-Z, a-z, 0-9, /, and spaces."
            placeholder="Enter Section Name">
        </div>
      </div>
      <div class="field">
        <label class="label" for="imageUrl">Description</label>
        <div class="control">
          <textarea class="textarea" name="sectionDescription" id="imageUrl" rows="5" required
            placeholder="Enter Section Description">
<% if (editing) { %><%= section.sectionDescription %><% } %></textarea>
        </div>
      </div>
      <div class="field">
        <label class="label" for="price">Duration</label>
        <div class="control">
          <input class="input" type="number" name="duration" id="price"
            value="<% if (editing) { %><%= section.duration %><% } %>" required min="1"
            placeholder="Duration in minutes">
        </div>
      </div>
      <div class="field">
        <label class="label" for="isMainTask">Is Main Task</label>
        <div class="control">
          <label class="switch">
            <input type="checkbox" name="isMainTask" id="isMainTask" <% if (editing && section.isMainTask) { %>checked<%
              } %> value="true">
              <span class="slider round"></span>
          </label>
        </div>
      </div>

      <div class="field">
        <label class="label" for="courseName">Course Name</label>
        <div class="control">
          <div class="select">
            <select name="courseId" id="courseName" required>
              <option value="">Select a course</option>
              <% courses.forEach(function(course) { %>
                <option value="<%= course._id %>" <% if(editing && section.course &&
                  section.course.toString()===course._id.toString()) { %>selected<% } %>><%= course.courseName %>
                </option>
                <% }); %>
            </select>
          </div>
        </div>
      </div>

      <% if (editing) { %>
        <input type="hidden" value="<%= section._id %>" name="sectionId" />
        <% } %>
          <div class="field">
            <div class="control">
              <button class="button is-primary" type="submit">
                <% if (editing) { %>Update Section<% } else { %>Add Section<% } %>
              </button>
            </div>
          </div>
    </form>
  </main>
</body>

</html>